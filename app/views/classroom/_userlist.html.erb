<script src="http://js.pusher.com/1.11/pusher.min.js"></script>
<script type="text/javascript">


var pusher = new Pusher('994bb8883e904a01481e');

Pusher.channel_auth_endpoint = '/pusher/auth';

var pc = pusher.subscribe('presence-channel-<%= params[:id] %>');

pc.bind('thing_create', function(thing) {
  get_list_user();
});


pc.bind('pusher:subscription_succeeded', function(members) {
	get_list_user();
});

pc.bind('pusher:member_added', function(member) {
	get_list_user();
});

pc.bind('pusher:member_removed', function(member) {
  get_list_user();
});

// function add_member(member){
// 	var class_name="member_id-"+member.id
// 	if ($('.'+class_name).length == 0){
// 		$("div#status").append(" <p class ='"+class_name+"' > "+ member.info.email +" is online </p>");
// 	}
// 
// }
// 
// function remove_member(member){
// 	var class_name="p.member_id-"+member.id
// 	$(class_name).remove();
// }

$.getJSON('ajax/test.json', function(data){
	
	var items = [];
	$.each(data, function(user_id, classroom_id) {
    items.push('<li id="' + user_id + '">' + classroom_id + '</li>');
  });
}


</script>


<div id='status'></div>